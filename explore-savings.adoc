---
sidebar: sidebar 
permalink: explore-savings.html 
keywords: cost, savings, compare costs, EBS, FSx for Windows File Server, SQL Server on-premises, on-premises, FSx for ONTAP 
summary: Amazon Elastic Block Store（EBS）、FSx for Windowsファイルサーバ、SQL ServerのオンプレミスデータベースストレージとFSx for ONTAPストレージを使用した場合のコストを比較します。 
---
= NetApp Workload Factory for Databases の割引情報をご覧ください
:allow-uri-read: 
:icons: font
:imagesdir: ./media/


[role="lead"]
Amazon Elastic Block Store (EBS)、FSx for Windows File Server、オンプレミスストレージでの Microsoft SQL Server の使用コストを FSx for ONTAPストレージと比較することで、データベースワークロードに対するNetApp Workload Factory for Databases の節約額をご確認ください。



== タスクの内容

Workload Factory には、ダッシュボード、インベントリ タブ、節約の探索タブなど、Amazon Elastic Block Store (EBS)、FSx for Windows ファイル サーバー、オンプレミス ストレージで実行されているデータベース ワークロードの節約を探索するいくつかの方法があります。いずれの場合も、節約計算ツールを使用すれば、FSx for ONTAPファイルシステム上のデータベースワークロードのストレージ、コンピューティング、SQL ライセンス、スナップショット、クローンなどの Microsoft SQL Server ワークロードを実行するためのさまざまなコスト要素を、Elastic Block Store (EBS)、FSx for Windows ファイルサーバー、オンプレミスストレージと比較できます。

Workload Factory が、これらのワークロードを FSx for ONTAPファイルシステムで実行することでコストを削減できると判断した場合は、Workload Factory コンソールのコスト削減計算ツールから直接、Microsoft SQL over FSx for ONTAPをデプロイできます。  Elastic Block Store、FSx for Windows ファイルサーバー、またはオンプレミスストレージ上に複数の Microsoft SQL Server インスタンスがある場合は、単一の SQL インスタンスを使用した FSx for ONTAP構成をお勧めします。

.すべてのデータベースワークロードの潜在的な削減効果
Workload Factory コンソールのデータベース *ダッシュボード* にアクセスして、FSx for ONTAPですべてのデータベース ワークロードを実行する場合に削減される可能性のあるコストの概要を確認します。  *潜在的な節約*タイルでは、Elastic Block Store と FSx for Windows File Server にあるすべてのデータベース ワークロードの数、潜在的なコスト節約、節約率、棒グラフでの視覚的な表現を表示できます。

image:screenshot-dashboard-potential-savings-tile.png["Workload Factory コンソールのデータベース ダッシュボードにある潜在的な節約タイルのスクリーンショット。潜在的な節約タイルには、Elastic Block Store と FSx for Windows File Server にあるすべてのデータベース ワークロードの数、潜在的なコスト節約額、節約率、棒グラフでの視覚的な表現が表示されます。"]

.削減額計算ツール
コスト削減計算ツールを使用すると、FSx for ONTAPファイルシステム上のデータベースワークロードについて、ストレージ、コンピューティング、SQLライセンス、Snapshot、クローンなど、Microsoft SQL Serverワークロードを実行する際のさまざまなコストコンポーネントを、Elastic Block Store（EBS）、FSx for Windowsファイルサーバ、オンプレミスストレージと比較できます。ストレージ要件によっては、FSx for ONTAPファイルシステムがデータベースワークロードにとって最も対費用効果の高いファイルシステムであることがわかります。

FSx for ONTAPファイルシステムを使用した場合、これらのMicrosoft SQL Server上のデータベースワークロード用ストレージのコストを削減できるかどうかが計算ツールに表示されます。<<電卓オプション,計算ツールの使用方法について説明します。>>

image:screenshot-ebs-savings-calculator-update.png["削減試算ツールページのスクリーンショットには、左側に選択したAmazon Elastic Block Store上のMicrosoft SQL Server構成が表示され、スナップショットとクローンの値をカスタマイズするオプションが表示されます。コスト削減額の単位での金額と割合の削減に加え、左側に表示されるFSx for ONTAPおよびElastic Block StoreストレージでMicrosoft SQL Serverを使用した場合の月額総コストも表示されます。"]



== SQL Server導入の分析

この計算ツールは、SQL Server環境の包括的な分析を実行して、使用されているリソースと機能がSQL Serverエディションと適切に一致していることを確認します。Standard Editionへのダウングレードを推奨する前に、Calculatorがチェックする主な要因と条件は次のとおりです。

.導入モデル
Calculatorは、導入モデルとEnterprise Editionが必要かどうかを評価します。

.割り当てられたリソース
Calculatorは、次のライセンスに依存して割り当てられたリソースの条件を評価します。

+ * ターゲットインスタンスの vCPU: インスタンスには 48 個以下の仮想 CPU があります。  * メモリ割り当て: インスタンスのメモリは 128 GB 以下です。

.エンタープライズ機能の使用
計算ツールは、次のエンタープライズ機能のいずれかが使用されているかどうかを確認します。

+ * データベースレベルのエンタープライズ機能 * オンラインインデックス操作 * リソースガバナー * ピアツーピアまたはOracleレプリケーション * R/Python拡張機能 * メモリ最適化TempDB

評価されたSQL Serverインスタンスが上記のEnterprise機能のいずれも使用せず、リソースの制約を満たしている場合は、ライセンスをStandard Editionにダウングレードすることをお勧めします。この推奨事項は、パフォーマンスや機能を犠牲にすることなく、SQL Serverのライセンスコストを最適化することを目的としています。



== 電卓オプション

お客様のシステムとFSx for ONTAPのコストを比較するために、カスタマイズと検出という2つの計算ツールオプションが用意されています。

カスタマイズによるコスト削減の詳細を見る:地域、導入モデル、SQL Serverエディション、毎月のデータ変更率、スナップショットの頻度など、EBSまたはFSx for Windows File Serverを搭載したAmazon EC2上のMicrosoft SQL Serverの構成設定を提供します。

検出されたホストの節約を調査: Workload Factory は既存の Microsoft SQL サーバーにリンクし、詳細を計算機に取り込んで自動的に比較します。この計算オプションを使用するには、_表示、計画、および分析_の権限を付与する必要があります。ユースケースは変更できますが、その他のすべての詳細は計算で自動的に決定されます。

さらに、計算機分析の精度を向上させることができますlink:https://docs.netapp.com/us-en/workload-setup-admin/add-credentials.html["AWSクレデンシャルを追加"^]。[既存のリソースに基づいてコスト削減を計算する]*を選択します。[クレデンシャルの追加]ページにリダイレクトされます。クレデンシャルを追加したら、FSx for ONTAPと比較する既存のリソースを選択し、*[削減効果を確認する]*を選択します。



=== カスタマイズによるコスト削減の詳細

ストレージタイプに応じたタブの手順に従います。

[role="tabbed-block"]
====
.Amazon Elastic Block Store（EBS）
--
.手順
. いずれかを使用してログインしlink:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["コンソールエクスペリエンス"^]ます。
. [Databases]から、[Explore savings]*、[Microsoft SQL Server on EBS]の順に選択します。
. Savings Calculatorで、次の詳細を入力します。
+
.. *リージョン*:ドロップダウンメニューからリージョンを選択します。
.. *展開モデル*:ドロップダウンメニューから展開モデルを選択します。
.. * SQL Server Edition *：ドロップダウンメニューからSQL Server Editionを選択します。
.. *毎月のデータ変更率（%）*：クローンおよびスナップショットのデータ変更率を1カ月あたりの平均で入力します。
.. * Snapshotの頻度*：ドロップダウンメニューからSnapshotの頻度を選択します。
.. *クローニングされたコピーの数*：EBS設定のクローニングされたコピーの数を入力します。
.. * SQL BYOLの月間コスト（$）*：必要に応じて、SQL BYOLの月間コストをドル単位で入力します。
.. [EC2 specifications]で、次の情報を入力します。
+
*** *マシンの説明*：オプションで、マシンを説明する名前を入力します。
*** *インスタンスタイプ*：ドロップダウンメニューからEC2インスタンスタイプを選択します。


.. [Volume Types]で、少なくとも1つのボリュームタイプについて次の詳細を指定します。IOPSとスループットは特定のディスクタイプボリュームに適用されます。
+
*** *ボリューム数*
*** *ボリュームあたりのストレージ容量（GiB）*
*** *ボリュームあたりのプロビジョニングIOPS *
*** *スループット（MB/秒）*


.. 常時稼働の可用性導入モデルを選択した場合は、*セカンダリEC2の仕様*および*ボリュームタイプ*の詳細を指定します。




--
.Amazon FSx for Windowsファイルサーバ
--
.手順
. いずれかを使用してログインしlink:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["コンソールエクスペリエンス"^]ます。
. [Databases]で、[Explore savings]*、[Microsoft SQL Server on FSx for Windows]の順に選択します。
. Savings Calculatorで、次の詳細を入力します。
+
.. *リージョン*:ドロップダウンメニューからリージョンを選択します。
.. *展開モデル*:ドロップダウンメニューから展開モデルを選択します。
.. * SQL Server Edition *：ドロップダウンメニューからSQL Server Editionを選択します。
.. *毎月のデータ変更率（%）*：クローンおよびスナップショットのデータ変更率を1カ月あたりの平均で入力します。
.. * Snapshotの頻度*：ドロップダウンメニューからSnapshotの頻度を選択します。
.. *クローニングされたコピーの数*：EBS設定のクローニングされたコピーの数を入力します。
.. * SQL BYOLの月間コスト（$）*：必要に応じて、SQL BYOLの月間コストをドル単位で入力します。
.. FSx for Windowsファイルサーバの設定で、以下を指定します。
+
*** *導入タイプ*：ドロップダウンメニューから導入タイプを選択します。
*** *ストレージタイプ*：SSDストレージはサポートされているストレージタイプです。
*** *合計ストレージ容量*：ストレージ容量を入力し、構成の容量単位を選択します。
*** *プロビジョニングされたSSD IOPS *：構成に対してプロビジョニングされたSSDのIOPSを入力します。
*** *スループット（MB/秒）*：スループットをMB/秒単位で入力します。


.. [EC2仕様（EC2 specifications）]で、ドロップダウンメニューから*[インスタンスタイプ（Instance type）]*を選択します。




--
====
データベースホストの設定の詳細を指定したら、ページに表示される計算式と推奨事項を確認します。

さらに、次のいずれかを選択して、ページの一番下までスクロールしてレポートを表示します。

* * PDFのエクスポート*
* *電子メールで送信*
* *計算結果を表示*


FSx for ONTAPに切り替えるには、の手順に従います <<FSx for ONTAPを使用してAWS EC2にMicrosoft SQL Serverを導入,FSx for ONTAPファイルシステムを使用してAQS EC2にMicrosoft SQL Serverを導入>>。



=== 検出されたホストの削減量を確認する

Workload Factory は、検出された Elastic Block Store および FSx for Windows File Server ホストの特性を入力するので、自動的に節約を検討できます。

.開始する前に
作業を開始する前に、次の前提条件を満たしてください。

* link:https://docs.netapp.com/us-en/workload-setup-admin/add-credentials.html["表示、計画、分析の権限を付与する"^] AWS アカウントの *節約の調査* タブで Elastic Block Store (EBS) および FSx for Windows システムを検出し、節約計算ツールで節約計算を表示します。
* インスタンス タイプの推奨事項を取得し、コストの精度を向上させるには、次の手順を実行します。
+
.. Amazon CloudWatch および AWS Compute Optimizer に権限を付与します。
+
... AWS マネジメントコンソールにサインインし、IAM サービスを開きます。
... IAMロールのポリシーを編集します。以下のAmazon CloudWatchとAWS Compute Optimizerの権限をコピーして追加します。
+
[source, json]
----
{
"Version": "2012-10-17",
"Statement": [
  {
   "Effect": "Allow",
   "Action": "compute-optimizer:GetEnrollmentStatus",
   "Resource": "*"
  },
  {
   "Effect": "Allow",
   "Action": "compute-optimizer:PutRecommendationPreferences",
   "Resource": "*"
  },
  {
   "Effect": "Allow",
   "Action": "compute-optimizer:GetEffectiveRecommendationPreferences",
   "Resource": "*"
  },
  {
   "Effect": "Allow",
   "Action": "compute-optimizer:GetEC2InstanceRecommendations",
   "Resource": "*"
  },
  {
   "Effect": "Allow",
   "Action": "autoscaling:DescribeAutoScalingGroups",
   "Resource": "*"
  },
  {
   "Effect": "Allow",
   "Action": "autoscaling:DescribeAutoScalingInstances",
   "Resource": "*"
  }
]
}
----


.. 課金対象の AWS アカウントを AWS Compute Optimizer に登録します。




ストレージタイプに応じたタブの手順に従います。

[role="tabbed-block"]
====
.Amazon Elastic Block Store（EBS）
--
.手順
. いずれかを使用してログインしlink:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["コンソールエクスペリエンス"^]ます。
. [データベース] タイルで、メニューから [節約の検討] を選択し、[Microsoft SQL Server on FSx for Windows] を選択します。
+
Workload Factory が EBS ホストを検出すると、[節約の探索] タブにリダイレクトされます。  Workload FactoryがEBSホストを検出しない場合は、計算ツールにリダイレクトされます。<<カスタマイズによるコスト削減の詳細,カスタマイズによるコスト削減の詳細>> 。

. *節約の検討*から、EBS 上で実行されている 1 つ以上のデータベース ホストを選択し、*節約の検討*を選択します。
. 必要に応じて、SQL Server 資格情報、Windows 資格情報、または不足している SQL Server 権限を追加して、データベース ホストを認証します。
+
認証が成功した後も節約の探索ページにデータが読み込まれない場合は、*在庫*タブを選択してデータを再読み込みし、もう一度*節約の探索*タブを選択します。

. コスト削減試算ツールでは、必要に応じて、EBSストレージ内のクローンとSnapshotに関する以下の詳細情報を入力することで、より正確なコスト削減試算を行うことができます。
+
.. *スナップショット頻度*: メニューからスナップショット頻度を選択します。
.. *クローンの更新頻度*: メニューからクローンの更新頻度を選択します。
.. *クローニングされたコピーの数*：EBS設定のクローニングされたコピーの数を入力します。
.. *毎月の変更率*：クローンおよびスナップショットのデータの1カ月あたりの平均変更率を入力します。
.. *ホストの追加*: オプションで、節約計算に含める検出された EBS ホストを最大 5 つ選択します。
+
Workload Factory は、選択した EBS ホストが単一の FSx for ONTAPファイルシステムのスループット、容量、または IOPS 制限を超えない限り、複数の SQL Server ホストを単一の FSx for ONTAP構成推奨事項に統合して、コスト削減を最適化します。





--
.Amazon FSx for Windowsファイルサーバ
--
.手順
. いずれかを使用してログインしlink:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["コンソールエクスペリエンス"^]ます。
. [データベース] タイルで、メニューから [節約の検討] を選択し、[Microsoft SQL Server on FSx for Windows] を選択します。
+
Workload Factory が FSx for Windows ホストを検出すると、[節約の探索] タブにリダイレクトされます。  Workload FactoryがFSx for Windowsホストを検出しない場合は、計算ツールにリダイレクトされます。<<カスタマイズによるコスト削減の詳細,カスタマイズによるコスト削減の詳細>> 。

. [節約の検討] タブで、FSx for Windows ファイル サーバー ストレージを使用したデータベース ホストの *節約の検討* を選択します。
. 必要に応じて、SQL Server 資格情報、Windows 資格情報、または不足している SQL Server 権限を追加して、データベース ホストを認証します。
+
認証が成功した後も節約の探索ページにデータが読み込まれない場合は、*在庫*タブを選択してデータを再読み込みし、もう一度*節約の探索*タブを選択します。

. 必要に応じて、Savings Calculatorで、FSx for Windowsストレージのクローン（シャドウコピー）とスナップショットに関する以下の詳細情報を提供し、コスト削減の見積もりをより正確にします。
+
.. *スナップショット頻度*: メニューからスナップショット頻度を選択します。
+
FSx for Windowsのシャドウコピーが検出された場合、デフォルト値は* Daily *です。シャドウコピーが検出されない場合、デフォルト値は*スナップショット頻度なし*です。

.. *クローンの更新頻度*: メニューからクローンの更新頻度を選択します。
.. *クローンコピーの数*：FSx for Windows構成でクローンコピーの数を入力します。
.. *毎月の変更率*：クローンおよびスナップショットのデータの1カ月あたりの平均変更率を入力します。




--
.オンプレミスのMicrosoft SQL Server
--
.手順
. いずれかを使用してログインしlink:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["コンソールエクスペリエンス"^]ます。
. [データベース] タイルで、メニューから [*節約の検討*] を選択し、[*Microsoft SQL Server オンプレミス*] を選択します。
. [SQL Server On-Premises]タブからスクリプトをダウンロードし、オンプレミスのSQL Server環境を評価します。
+
.. 評価スクリプトをダウンロードしてください。このスクリプトは、PowerShell に基づくデータ収集ツールです。 SQL Server の構成とパフォーマンス データを収集し、Workload Factory にアップロードします。移行アドバイザーはデータを評価し、SQL Server 環境向けの FSx for ONTAPの導入を計画します。
+
image:screenshot-download-script-on-premises.png["[SQL Server On-Premises]タブのスクリーンショットには、評価スクリプトをダウンロードするためのオプションが表示されています。"]

.. SQL Serverホストでスクリプトを実行します。
.. Workload Factory の SQL Server オンプレミス タブにスクリプト出力をアップロードします。
+
image:screenshot-upload-script-on-premises.png["[SQL Server On-Premises]タブのスクリーンショットには、評価スクリプトをアップロードするオプションが表示されています。"]



. [SQL Server On-Premises]タブで*[Explore Savings]*を選択し、FSx for ONTAPに対するSQL Serverオンプレミスホストのコスト分析を実行します。
. 削減量計算ツールで、オンプレミスホストのリージョンを選択します。
. より正確な結果を得るには、コンピューティング情報とストレージとパフォーマンスの詳細を更新してください。
. 必要に応じて、オンプレミスデータベース環境のクローン（シャドウコピー）とSnapshotに関する次の詳細情報を指定し、コスト削減の見積もりをより正確にします。
+
.. *スナップショット頻度*: メニューからスナップショット頻度を選択します。
+
FSx for Windowsのシャドウコピーが検出された場合、デフォルト値は* Daily *です。シャドウコピーが検出されない場合、デフォルト値は*スナップショット頻度なし*です。

.. *クローンの更新頻度*: メニューからクローンの更新頻度を選択します。
.. *クローンコピーの数*：オンプレミス構成のクローンコピーの数を入力します。
.. *毎月の変更率*：クローンおよびスナップショットのデータの1カ月あたりの平均変更率を入力します。




--
====
データベースホストの設定の詳細を指定したら、ページに表示される計算式と推奨事項を確認します。

さらに、次のいずれかを選択して、ページの一番下までスクロールしてレポートを表示します。

* * PDFのエクスポート*
* *電子メールで送信*
* *計算結果を表示*


FSx for ONTAPに切り替えるには、の手順に従います <<FSx for ONTAPを使用してAWS EC2にMicrosoft SQL Serverを導入,FSx for ONTAPファイルシステムを使用してAQS EC2にMicrosoft SQL Serverを導入>>。

.オンプレミスのホストの削除
Microsoft SQL Server オンプレミス ホストの節約を検討した後、オンプレミス ホスト レコードを Workload Factory から削除するオプションがあります。  Microsoft SQL Server オンプレミス ホストのアクション メニューを選択し、[削除] を選択します。



== FSx for ONTAPを使用してAWS EC2にMicrosoft SQL Serverを導入

コスト削減を実現するためにFSx for ONTAPに切り替えたい場合は、*[作成]*をクリックして新しいMicrosoft SQL Serverの作成ウィザードから直接推奨構成を作成するか、*[保存]*をクリックして推奨構成を保存しておきます。


NOTE: Workload Factory は、複数の FSx for ONTAPファイル システムの保存または作成をサポートしていません。

.導入方法
_データベース ホスト作成権限_ があれば、Workload Factory から直接 FSx for ONTAPを使用して、AWS EC2 に新しい Microsoft SQL サーバーをデプロイできます。また、Codebox ウィンドウからコンテンツをコピーし、Codebox メソッドのいずれかを使用して推奨構成を展開することもできます。

権限がなくても、Codebox ウィンドウからコンテンツをコピーし、Codebox メソッドのいずれかを使用して推奨構成を展開できます。

.関連情報
link:https://docs.netapp.com/us-en/workload-setup-admin/permissions-reference.html["ワークロードファクトリーの権限リファレンス"^]
